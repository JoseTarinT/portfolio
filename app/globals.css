/* Explicit light theme (JS-driven) */
html[data-theme="light"],
:root[data-theme="light"] {
  color-scheme: light;
  --card-bg: #ffffff;
  --header-bg: #fafafa;
  --text-secondary: #ededed;
  --accent: #06b6d4;
  --border: #4b5563;
  --border-secondary: #c8c0b6;
  --foreground: #171717;
  --foreground-secondary: #000000;
  --background: #e6e6e6;
  --background-secundary: #ffffff;
  --name-background-gradient: linear-gradient(90deg, #4b5563, #6b7280, #1f2937);
  --name-box-shadow: 0 0 8px #ffffff33;
  /* tweak backdrop for light mode if needed via html[data-theme="light"] body::after */
}

/* System preference fallbacks (used only when no data-theme is set) */
@media (prefers-color-scheme: light) {
  :root {
    --card-bg: #ffffff;
    --header-bg: #fafafa;
    --text-secondary: #ededed;
    --accent: #06b6d4;
    --border: #4b5563;
    --border-secondary: #c8c0b6;
    --foreground: #171717;
    --foreground-secondary: #000000;
    --background: linear-gradient(#fafafa, #f9fafb, #f3f4f6);
    --background-secundary: #ecf2fb;
    --name-background-gradient: linear-gradient(
      90deg,
      #4b5563,
      #6b7280,
      #1f2937
    );
    --name-box-shadow: 0 0 8px #ffffff33;
  }
}

@media (prefers-color-scheme: dark) {
  :root {
    color-scheme: dark;
    --card-bg: #1f2937;
    --header-bg: #111827;
    --text-secondary: #171717;
    --accent: #06b6d4;
    --border: #d1d5db;
    --border-secondary: #373f49;
    --foreground: #ededed;
    --foreground-secondary: #ffffff;
    --background: linear-gradient(#1f2937, #111827, #000000);
    --background-secundary: #16223b;
    --name-background-gradient: linear-gradient(
      90deg,
      #f9fafb,
      #f3f4f6,
      #ffffff
    );
    --name-box-shadow: 0 0 8px #f9731680;
  }
}

/* Explicit dark theme override (JS-driven) */
html[data-theme="dark"],
:root[data-theme="dark"] {
  color-scheme: dark;
  --card-bg: #1f2937;
  --header-bg: #111827;
  --text-secondary: #171717;
  --accent: #06b6d4;
  --border: #4b5563;
  --border-secondary: #373f49;
  --foreground: #ededed;
  --foreground-secondary: #ffffff;
  --background: linear-gradient(#1f2937, #111827, #000000);
  --background-secundary: #16223b;
  --name-background-gradient: linear-gradient(90deg, #f9fafb, #f3f4f6, #ffffff);
  --name-box-shadow: 0 0 8px #f9731680;
}

/* layout / global rules */
html,
body {
  max-width: 100vw;
  overflow-x: hidden;
}

body {
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: color 180ms ease, background-color 220ms ease;
}

body::after {
  content: "";
  position: fixed;
  inset: -48px; /* expand beyond viewport to hide blur halo */
  z-index: -1;
  background: var(--background);
  background-size: 200% 200%;
  background-position: 0% 50%;
  opacity: 0.9;
  filter: blur(36px) saturate(120%);
  pointer-events: none;
  will-change: background-position, transform;
  transform: scale(1.02);
  transition: opacity 220ms ease, filter 220ms ease, transform 220ms ease;
}

/* explicit theme-specific backdrop adjustments (JS-driven attribute overrides system) */
html[data-theme="dark"] body::after {
  opacity: 0.7;
  filter: blur(28px) saturate(130%);
}

html[data-theme="light"] body::after {
  opacity: 0.95;
  filter: blur(18px) saturate(110%);
}

/* defaults for universal elements */
* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

a {
  color: var(--accent);
  text-decoration: none;
}

/* ensure form controls and UA components follow the theme */
html[data-theme="dark"] {
  color-scheme: dark;
}
html[data-theme="light"] {
  color-scheme: light;
}
